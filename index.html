<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: blob:; connect-src 'self' http://localhost:5000 http://127.0.0.1:5000 https://tessdata.projectnaptha.com; worker-src 'self' blob:;">
  <title>Text Extractor</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="node_modules/tesseract.js/dist/tesseract.min.js"></script>
</head>

<body>
  <div class="app">
    <aside class="history-panel">
      <h2 class="history-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</h2>
      <button type="button" class="btn btn-secondary btn-sm btn-block history-clear"
        id="btnClearHistory">‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
      <div class="history-list-wrap">
        <ul class="history-list" id="historyList" aria-label="‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"></ul>
      </div>
    </aside>
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1 class="app-title">Text Extractor</h1>
        <button type="button" class="theme-toggle" id="themeToggle" title="‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î/‡∏™‡∏ß‡πà‡∏≤‡∏á">
          <span class="theme-icon">üåô</span>
        </button>
      </div>

      <section class="sidebar-section">
        <label class="section-label">OCR Engine</label>
        <select class="language-select" id="ocrEngine">
          <option value="surya" selected>Surya OCR (‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Å‡∏ß‡πà‡∏≤)</option>
          <option value="tesseract">Tesseract (‡πÉ‡∏ô‡∏ï‡∏±‡∏ß)</option>
        </select>
      </section>

      <section class="sidebar-section">
        <label class="section-label">‡∏†‡∏≤‡∏©‡∏≤ OCR</label>
        <select class="language-select" id="ocrLanguage">
          <option value="tha+eng" selected>‡πÑ‡∏ó‡∏¢ + English</option>
          <option value="eng">English (‡πÇ‡∏Ñ‡πâ‡∏î)</option>
          <option value="tha">‡πÑ‡∏ó‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</option>
        </select>
        <label class="checkbox-label">
          <input type="checkbox" id="enablePreprocess" checked>
          <span>‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏π‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="codeMode">
          <span>‡πÇ‡∏´‡∏°‡∏î‡πÇ‡∏Ñ‡πâ‡∏î (‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©)</span>
        </label>
      </section>

      <section class="sidebar-section">
        <label class="section-label">‡πÑ‡∏ü‡∏•‡πå</label>
        <button type="button" class="btn btn-primary btn-block" id="btnOpen">
          <span class="btn-icon">üìÇ</span>
          ‡πÄ‡∏õ‡∏¥‡∏î‡∏†‡∏≤‡∏û / PDF
        </button>

        <div class="image-preview-area" id="imagePreviewArea">
          <div id="previewList" class="preview-list" hidden></div>
          <span class="preview-placeholder" id="previewPlaceholder">‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</span>
        </div>

        <button type="button" class="btn btn-extract btn-block" id="btnExtract" disabled>
          <span class="btn-icon" id="extractIcon">üîç</span>
          <span id="extractText">‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ</span>
        </button>

        <p class="file-info" id="fileInfo">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå</p>
        <p class="paste-hint">‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î (Ctrl+V) ‚Äî ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ</p>
      </section>

      <section class="sidebar-section">
        <label class="section-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
        <div class="status" id="status" aria-live="polite">‡∏û‡∏£‡πâ‡∏≠‡∏°</div>
      </section>

      <section class="sidebar-section" id="deviceSection" hidden>
        <label class="section-label">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</label>
        <div class="device-info" id="deviceInfo">
          <span class="device-icon" id="deviceIcon">üíª</span>
          <span class="device-text" id="deviceText">CPU</span>
        </div>
      </section>

      <section class="sidebar-section">
        <label class="section-label">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</label>
        <div class="export-buttons">
          <button type="button" class="btn btn-secondary btn-sm" id="btnCopy" disabled title="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
            <span class="btn-icon">üìã</span>
            ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å
          </button>
          <button type="button" class="btn btn-secondary btn-sm" id="btnExport" disabled title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô .txt">
            <span class="btn-icon">üíæ</span>
            TXT
          </button>
          <button type="button" class="btn btn-secondary btn-sm" id="btnClear" title="‡∏•‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå">
            ‡∏•‡πâ‡∏≤‡∏á
          </button>
        </div>
      </section>

      <section class="sidebar-section">
        <div class="ocr-tips">
          <strong>ÔøΩ ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö OCR:</strong>
          <ul>
            <li><strong>Surya:</strong> ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Å‡∏ß‡πà‡∏≤</li>
            <li><strong>Tesseract:</strong> ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤</li>
            <li>‡πÇ‡∏Ñ‡πâ‡∏î: Surya + light theme</li>
            <li>‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏ä‡πâ‡∏≤ (‡πÇ‡∏´‡∏•‡∏î model)</li>
          </ul>
        </div>
      </section>
    </aside>

    <main class="main">
      <div class="panel results-panel" id="dropTarget">
        <div class="panel-header">
          <h2 class="panel-title">OCR Results</h2>
          <div class="panel-actions">
            <span class="result-count" id="resultCount"></span>
            <button type="button" class="btn btn-secondary btn-sm" id="btnCopyAll" disabled>Copy All</button>
          </div>
        </div>
        <div class="result-content">
          <div class="batch-images-wrap" id="batchImagesWrap" hidden>
            <div class="batch-images-label">‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á (‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö)</div>
            <div class="batch-images" id="batchImages"></div>
          </div>
          <textarea class="result-text" id="resultText" readonly
            placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
        </div>
      </div>
    </main>
  </div>
  <input type="file" id="fileInput" accept=".jpg,.jpeg,.png,.pdf" multiple hidden>
  
  <!-- Image Lightbox -->
  <div class="lightbox" id="lightbox" hidden>
    <button type="button" class="lightbox-close" id="lightboxClose" title="‡∏õ‡∏¥‡∏î (ESC)">√ó</button>
    <img class="lightbox-image" id="lightboxImage" alt="Preview">
  </div>
  
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <div class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏• AI...</div>
  </div>
  
  <script src="renderer.js"></script>
</body>

</html>